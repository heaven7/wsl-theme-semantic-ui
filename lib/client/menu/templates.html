<template name="menu">
  <div class="ui menu {{class}}">
    {{#each items}}
        {{#if isArray value}}
            <div class="{{#if isArray value}}ui dropdown{{/if}} item {{class}}" id="{{id}}">
                {{text}}
                {{#if icon}}
                    {{> icon icon=icon}}
                {{/if}}
                <div class="menu">
                  {{#each value}}
                      {{> menuItem this}}
                  {{/each}}
                </div>
                </div>
        {{else}}
            {{> menuItem this}}
        {{/if}}
    {{/each}}
  </div>
</template>

<template name="menuItem">
    {{#if template}}
        <div class="item">
            {{> Template.dynamic template=template data=data}}
        </div>
    {{else}}
        {{#if header}}
            <div class="item">
                {{>h4 text=header}}
            </div>
        {{else}}
            {{#if search}}
                <div class="item">
                    {{> search this}}
                </div>
            {{else}}
                {{#if form}}
                    <div class="ui form {{formClass}}">
                        {{> formField this}}
                    </div>
                {{else}}
                    {{#if divider}}
                        {{> divider this}}
                    {{else}}
                        {{> menuLink this}}
                    {{/if}}
                {{/if}}
            {{/if}}
        {{/if}}
    {{/if}}
</template>


<template name="menuLink">
  <a href={{href}} class="item {{class}}" id="{{id}}" {{attrs}}>
    {{#if icon}}
        {{> icon icon=icon}}
    {{/if}}
    {{value}}
  </a>
</template>

<template name="menuDiv">
  <div class="item {{class}}" id="{{id}}">
    {{#if icon}}
      {{> icon icon=icon}}
    {{/if}}
    {{value}}
  </div>
</template>